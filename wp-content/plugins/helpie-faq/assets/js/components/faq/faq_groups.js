import{get}from"svelte/store";var FaqGroups={settings_saved:!1,init:function(){if(this.settings_saved=!1,this.helpie_faq_group=helpie_faq_group,0==this.helpie_faq_group.is_page)return!1;this.pending_post_ids=this.helpie_faq_group.pending_post_ids,this.eventListeners()},initStore:function(e){this.faq_group_store=e},eventListeners:function(){var e=this,t=e.getSelectors(),o=t.hfaq_group_taxonomy.find("form#addtag").length>0;o&&"show_faq_groups"===this.helpie_faq_group.page_action&&e.showGroupSummaryWithLinkBtn(),o&&"create_faq_group"===this.helpie_faq_group.page_action&&e.showFaqGroupForm(),e.loadFaqGroupAccordions(),jQuery(t.repeater).on("click",t.repeater_clone,(function(o){o.preventDefault();let r=jQuery(this).closest(".csf-repeater-item").index()+1,n=jQuery(t.repeater).find(t.repeater_items).eq(r).find(t.accordion_content).find('input[name="'+e.getPostFieldName(r)+'"]');n.length>0&&n.attr("value","0")})),jQuery(".helpie-faq-groups-table").on("click",".term-shortcode-wrap .clipboard-text",(function(){var e=document.getElementById("faq-group-shortcode");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")})),jQuery(".hfaq-group-page").on("click",".faq_group_shortcode .helpie-faq-group .clipboard",(function(){var e=jQuery(this).parent().find(".shorcode-content").text(),t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()})),jQuery(t.repeater).on("click",t.repeater_add_btn,(function(e){e.preventDefault();var o=jQuery(t.repeater_wrapper).find(".csf-repeater-item").last().find(t.accordion),r=jQuery(t.repeater_wrapper).find(t.accordion_content);r.length>0&&r.each((function(){jQuery(this).removeClass("csf-accordion-open")})),o.find(".csf-accordion-item .csf-accordion-title").triggerHandler("click")}));var r=t.fas_quora_icon;jQuery(t.repeater).on("input",t.accordion_input_title,(function(o){let n=jQuery(this).val();0==n.length&&(n="FAQ Item");let i=jQuery(this).closest(".hfaq-groups__accordion"),a=jQuery(this).closest(".csf-accordion-content").find(".helpie-group-posts input[type='text']").val(),c=e.checkPendingStatus(a),s=i.find(".csf-accordion-title"),p=r+n;1==c&&(p+=t.pending_status_notice),s.html(p)}))},showGroupSummaryWithLinkBtn:function(){var e=this.getSelectors();if(0==e.hfaq_group_taxonomy.find("#col-container").length>0)return!1;e.hfaq_group_taxonomy.find("#col-left").hide(),e.hfaq_group_taxonomy.find("#col-right").addClass("hfaq-group-page hfaq-full-width");let t='<a href="'+this.helpie_faq_group.create_link+'" class="page-title-action hfaq-group__add--link">Add New</a>';e.hfaq_group_taxonomy.find(".wp-heading-inline").append(t)},showFaqGroupForm:function(){var e=this.getSelectors();if(0==e.hfaq_group_taxonomy.find("#col-container").length>0)return!1;e.hfaq_group_taxonomy.find("#col-left").addClass("hfaq-group-page hfaq-full-width"),e.hfaq_group_taxonomy.find("#col-right").hide(),e.hfaq_group_taxonomy.find(".search-form").hide(),this.setFaqgroupCreateMenuActive()},setFaqgroupCreateMenuActive:function(){var e=jQuery("#menu-posts-helpie_faq").find("ul.wp-submenu li");if(0==e.length)return!1;e.each((function(){"Add New FAQ Group"===jQuery(this).find("a").text()&&(e.removeClass("current"),jQuery(this).addClass("current"))}))},getPostFieldName:function(e){return"helpie_faq_group_items[faq_groups]["+e+"][faq_item][post_id]"},getSelectors:function(){return{hfaq_group_taxonomy:jQuery("body.taxonomy-helpie_faq_group"),repeater_add_btn:".csf-repeater-add",repeater_wrapper:".csf-repeater-wrapper",repeater_items:".csf-repeater-wrapper .csf-repeater-item",repeater:".csf-field-repeater",accordion:".csf-field-accordion",accordion_content:".csf-repeater-content .csf-accordion-item .csf-accordion-content",accordion_post_id_field:".csf-repeater-content .csf-accordion-item .csf-accordion-content .helpie-group-posts input[type='text']",accordion_input_title:".csf-repeater-content .csf-accordion-item .csf-accordion-content .hfaq-groups__accordion--input-title input[type='text']",repeater_clone:".csf-repeater-wrapper .csf-repeater-item .csf-repeater-helper .csf-repeater-clone",fas_quora_icon:'<i class="csf--icon fa fa-quora"></i>',pending_status_notice:' <span class="post-status--pending">(Pending)</span>'}},loadFaqGroupAccordions:function(){var e=this,t=e.getSelectors(),o=t.hfaq_group_taxonomy.find(t.repeater_items);if(0!=o.length){var r=t.fas_quora_icon;o.each((function(){let o=jQuery(this).find(t.accordion_input_title).val(),n=jQuery(this).find(t.accordion_post_id_field).val(),i=e.checkPendingStatus(n),a=r+o;1==i&&(a+=t.pending_status_notice),e.setAccordionTitle(jQuery(this),a)}))}},setAccordionTitle:function(e,t){e.find(".hfaq-groups__accordion .csf-accordion-item .csf-accordion-title").html(t)},checkPendingStatus:function(e){let t=!1;return e=parseInt(e),this.pending_post_ids.indexOf(e)>-1&&(t=!0),t}};export default FaqGroups;