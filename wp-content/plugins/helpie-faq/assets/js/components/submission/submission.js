var SubmissionAjax=require("./submission_ajax.js"),Submission={init:function(){if(""==helpie_faq_object.enabled_submission)return!1;this.eventHandler()},eventHandler:function(){this.initChosen(),this.toggleForm(),this.submitForm(),"premium"==helpie_faq_object.plan&&SubmissionAjax.getLoggedEmail()},initChosen:function(){jQuery(".helpie-faq").find(".form__section .faq_categories").each((function(){jQuery(this).chosen({width:"100%"})}))},submitForm:function(){var i=this;jQuery(".helpie-faq").on("click",".form__submit",(function(e){e.stopPropagation();var t=jQuery(this).closest(".form__section"),o=t.find(".form__text").val(),n=t.find(".form__email").val(),a=t.find(".form__textarea").val(),s=t.data("woo-product"),r=t.data("kb-category"),u=t.find(".faq_categories").val(),f=t.find("input[name=faq_group_id]").val(),l={action:"helpie_faq_submission",nonce:i.nonce,question:o,categories:u,group_id:f};n&&(l.email=n),a&&(l.answer=a),s&&(l.woo_product=s),r&&(l.kb_category=r),(o&&i._isEmail(n)||o&&null==n)&&(e.preventDefault(),SubmissionAjax.postForm(l,t))}))},toggleForm:function(){jQuery(".helpie-faq").on("click",".form__toggle",(function(i){i.preventDefault(),i.stopPropagation();let e=jQuery(this).parent().next(".form__section"),t=this.value,o="";e.next().hide(),t===faqStrings.addFAQ?(o=faqStrings.hide,e.show()):(o=faqStrings.addFAQ,e.hide()),this.value=o}))},_isEmail:function(i){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)}};module.exports=Submission;