let lastID=1;export const generateIDs=e=>{let t={},r=jQuery.extend(!0,{},e);for(const[e,n]of Object.entries(r))t[lastID]={originId:e},n.parent&&(t[lastID].parent=n.parent),n.default&&(t[lastID].properties=n.default),!n.children||"accordion"!=n.type&&"repeater"!=n.type?n.children&&(t[lastID].children=n.children):t[lastID].children=[n.children],n.dependency&&(t[lastID].dependency=n.dependency),n.options_getter&&n.options_getter.params&&(t[lastID].options_getter={params:n.options_getter.params}),lastID++;for(const[e,r]of Object.entries(t))if(r.children&&(t[e].children=r.children.map((e=>{if(e instanceof Array)return e.map((e=>{for(const[r,n]of Object.entries(t))if(n.originId==e)return parseInt(r)}));for(const[r,n]of Object.entries(t))if(n.originId==e)return parseInt(r)}))),r.dependency&&(t[e].dependency=r.dependency.map((e=>{for(const[r,n]of Object.entries(t))n.originId==e.id&&(e.id=parseInt(r));return e}))),r.options_getter&&r.options_getter.params)for(const[n,o]of Object.entries(r.options_getter.params))for(const[r,s]of Object.entries(t))s.originId==o.id&&(t[e].options_getter.params[n].id=parseInt(r));return t};export const getElements_OnAddRepeaterClick=(e,t,r)=>{let n=r[e].originId,o=_getElementAndItsChildren(n,t),s=generateIDs(o),i=0;for(const[t]of Object.entries(s))0==i?r[parseInt(e)].children.push(s[t].children[0]):r[t]=Object.assign({},s[t]),i++;return r};export const getElements_OnRemoveRepeaterClick=(e,t,r)=>(r[e].children[t]&&(r[e].children[t].forEach((e=>{let t=_getChildren(e,r);for(const[e]of Object.entries(t))delete r[e]})),r[e].children.splice(t,1)),r);export const setLastId=e=>{lastID=e};export const getLastId=()=>lastID;export const _getElementAndItsChildren=(e,t)=>{let r=[];for(const[n,o]of Object.entries(t))if(e==n&&(r[n]=Object.assign({},t[n])),e==n&&r[n]&&r[n].children){let e=[];o.children.forEach((r=>{e.push(_getElementAndItsChildren(r,t))})),e.forEach((e=>{for(const[t,n]of Object.entries(e))r[t]=n}))}return r};const _getChildren=(e,t)=>{let r={};for(let[n,o]of Object.entries(t))if(n=parseInt(n),e==n&&(r[n]=Object.assign({},t[n])),e==n&&r[n]&&r[n].children){let e=[];o.children.forEach((r=>{"Array"==_getDataType(r)?r.forEach((r=>{e.push(_getChildren(r,t))})):e.push(_getChildren(r,t))})),e.forEach((e=>{for(const[t,n]of Object.entries(e))r[t]=n}))}return r},_getDataType=e=>Object.prototype.toString.call(e).split(/\W/)[2];